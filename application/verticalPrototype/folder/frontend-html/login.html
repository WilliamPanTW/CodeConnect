<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/application/verticalPrototype/folder/frontend-css/login.css">
    <title>CodeConnect Login</title>
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
          integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
          crossorigin="anonymous"
          referrerpolicy="no-referrer" />
    <script>
        async function signinUser() {
            // Get password and email values from their html element
            var password = document.getElementById("password").value;
            var email = document.getElementById("email").value;

            // Make a post request to backend /api/auth/login with json body email and password
            try {
                const requestOptions = {
                    method: "POST",
                    headers: {
                        // Content Type must be application/json so the middleware will parese it
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({ email: email, password: password })
                };
                const response = await fetch("/api/auth/login", requestOptions);
                // If fetch response code is not successfull
                if (!response.ok) {
                    const error = response.json().error;
                    console.log(error);
                    return false;
                }
                console.log("login in successful");
                // if login successfull redirect to /about
                window.location = "/homepage";
                return true;
            }
            catch (error) {
                console.error("Failed at signing in user, Error: ", error);
            }

            return true;
        }
    </script>
</head>
<body>
    <div class="header">
        <img src="Logo.jpg" alt="Logo" class="logo">
        <div class="brand">CodeConnect</div>
        <div class="login-signup">
            <a href="login.html">Login</a>
            <a href="signup.html">Sign Up</a>
        </div>
        <h2>Login</h2>

    </div>
    <div class="login-container">
        <img src="Logo.jpg" alt="Logo">
        <h1>CodeConnect</h1>
        <h4>Push your way through!</h4>
        <input type="text" id="email" placeholder="Username">
        <input type="password" id="password" placeholder="Password">
        <button onclick="return signinUser();">Sign In</button>
        <div class="links">
            <a href="./forgotpasswordverification.html">Forgot Password</a>
            <a href="./signup.html">Sign Up</a>
        </div>
    </div>
    <footer>
        <div class="footer-container">
            <div class="footer-nav">
                <ul>
                    <li><a href="index.html"><strong>Home</strong></a></li>
                    <li><a href="about.html"><strong>About</strong></a></li>
                    <li><a><strong>Email: CodeConnectSupport@gmail.com</strong></a></li>
                    <li><a><strong>Phone: 888-888-8888</strong></a></li>
                </ul>
            </div>
            <div class="media-icons">
                <a href="#"><i class="fa-brands fa-instagram"></i></a>
                <a href="#"><i class="fa-brands fa-facebook"></i></a>
                <a href="#"><i class="fa-brands fa-google-plus"></i></a>
                <a href="#"><i class="fa-brands fa-youtube"></i></a>
            </div>
            <div class="footer-bott">
                <p>&copy; 2024 CodeConnect. All rights reserved.</p>
            </div>
        </div>
    </footer>
</body>
</html>